import{_ as M,r as f,b as N,M as T,c as s,U as z,o as V,d as I,f as e,w as l,V as p,E as r,e as g,h as S,i as m,W,n as Z,p as j,Z as q}from"./index-1630d45c.js";const A={class:"keywords-page"},G={class:"page-header"},H={__name:"Keywords",setup(J){const v=f([]),w=f(!1),i=f(!1),n=N({keyword:"",status:"show"}),c=async()=>{try{w.value=!0;const o=await p.get("/keywords");v.value=o.data.data||[]}catch(o){console.error("Failed to load keywords:",o),r.error("加载热门关键词失败")}finally{w.value=!1}},h=async o=>{try{await p.put(`/keywords/${o.id}/status`,{status:o.status}),r.success(`关键词 "${o.keyword}" 状态已更新为 ${o.status}`)}catch(t){console.error("Failed to update status:",t),r.error("更新状态失败"),c()}},x=async()=>{if(!n.keyword.trim()){r.error("请输入关键词");return}try{await p.post("/keywords",{keyword:n.keyword,status:n.status}),r.success("添加成功"),n.keyword="",n.status="show",i.value=!1,c()}catch(o){console.error("Failed to create keyword:",o),r.error("添加关键词失败")}},C=async o=>{try{await j.confirm(`确定要删除关键词 "${o.keyword}" 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await p.delete(`/keywords/${o.id}`),r.success("删除成功"),c()}catch(t){t.message!=="cancel"&&(console.error("Failed to delete keyword:",t),r.error("删除失败"))}};return T(()=>{c()}),(o,t)=>{const $=s("el-icon"),_=s("el-button"),d=s("el-table-column"),u=s("el-option"),k=s("el-select"),B=s("el-table"),U=s("el-card"),D=s("el-input"),b=s("el-form-item"),E=s("el-form"),F=s("el-dialog"),K=z("loading");return V(),I("div",A,[e(U,null,{default:l(()=>[g("div",G,[t[6]||(t[6]=g("h2",null,"热门关键词管理",-1)),e(_,{type:"primary",onClick:t[0]||(t[0]=a=>i.value=!0)},{default:l(()=>[e($,null,{default:l(()=>[e(S(q))]),_:1}),t[5]||(t[5]=m(" 添加关键词 ",-1))]),_:1})]),W((V(),Z(B,{data:v.value,style:{width:"100%"}},{default:l(()=>[e(d,{prop:"id",label:"ID",width:"80"}),e(d,{prop:"keyword",label:"关键词",width:"200"}),e(d,{prop:"submit_count",label:"提交次数",width:"120"}),e(d,{prop:"status",label:"状态",width:"120"},{default:l(a=>[e(k,{modelValue:a.row.status,"onUpdate:modelValue":y=>a.row.status=y,size:"small",onChange:y=>h(a.row)},{default:l(()=>[e(u,{label:"显示",value:"show"}),e(u,{label:"隐藏",value:"hide"}),e(u,{label:"黑洞",value:"blackhole"})]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(d,{prop:"created_at",label:"创建时间"}),e(d,{label:"操作",width:"150"},{default:l(a=>[e(_,{type:"danger",size:"small",onClick:y=>C(a.row)},{default:l(()=>[...t[7]||(t[7]=[m(" 删除 ",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[K,w.value]])]),_:1}),e(F,{modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=a=>i.value=a),title:"添加关键词",width:"400px"},{footer:l(()=>[e(_,{onClick:t[3]||(t[3]=a=>i.value=!1)},{default:l(()=>[...t[8]||(t[8]=[m("取消",-1)])]),_:1}),e(_,{type:"primary",onClick:x},{default:l(()=>[...t[9]||(t[9]=[m("确定",-1)])]),_:1})]),default:l(()=>[e(E,{model:n,"label-width":"80px"},{default:l(()=>[e(b,{label:"关键词"},{default:l(()=>[e(D,{modelValue:n.keyword,"onUpdate:modelValue":t[1]||(t[1]=a=>n.keyword=a),placeholder:"请输入关键词"},null,8,["modelValue"])]),_:1}),e(b,{label:"状态"},{default:l(()=>[e(k,{modelValue:n.status,"onUpdate:modelValue":t[2]||(t[2]=a=>n.status=a)},{default:l(()=>[e(u,{label:"显示",value:"show"}),e(u,{label:"隐藏",value:"hide"}),e(u,{label:"黑洞",value:"blackhole"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},O=M(H,[["__scopeId","data-v-27826204"]]);export{O as default};
