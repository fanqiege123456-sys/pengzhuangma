<!--pages/match/match.wxml-->
<view class="container">
  <view class="match-detail" wx:if="{{matchInfo}}">
    <!-- åŒ¹é…çŠ¶æ€ -->
    <view class="status-card">
      <view class="status-icon">
        <text class="icon">{{matchInfo.status === 'matched' ? 'ğŸ‰' : matchInfo.status === 'friend_added' ? 'ğŸ‘¥' : 'ğŸ˜”'}}</text>
      </view>
      <view class="status-text">
        {{matchInfo.status === 'matched' ? 'æ­å–œï¼åŒ¹é…æˆåŠŸ' : matchInfo.status === 'friend_added' ? 'å·²æ·»åŠ å¥½å‹' : 'å¾ˆé—æ†¾ï¼Œå·²é”™è¿‡'}}
      </view>
      <view class="collision-code-display">
        <text class="code">{{matchInfo.code}}</text>
      </view>
    </view>

    <!-- ç”¨æˆ·ä¿¡æ¯ -->
    <view class="users-card">
      <view class="user-section">
        <image class="user-avatar-large" src="{{matchInfo.user1.avatar}}" />
        <view class="user-details">
          <text class="user-name">{{matchInfo.user1.nickname}}</text>
          <text class="user-wechat">å¾®ä¿¡å·: {{matchInfo.user1.wechat_no}}</text>
          <text class="user-region" wx:if="{{matchInfo.user1.region}}">åœ°åŒº: {{matchInfo.user1.region}}</text>
          <text class="user-age" wx:if="{{matchInfo.user1.age}}">å¹´é¾„: {{matchInfo.user1.age}}å²</text>
        </view>
      </view>
      
      <view class="vs-divider">
        <text class="vs-text">VS</text>
      </view>
      
      <view class="user-section">
        <image class="user-avatar-large" src="{{matchInfo.user2.avatar}}" />
        <view class="user-details">
          <text class="user-name">{{matchInfo.user2.nickname}}</text>
          <text class="user-wechat">å¾®ä¿¡å·: {{matchInfo.user2.wechat_no}}</text>
          <text class="user-region" wx:if="{{matchInfo.user2.region}}">åœ°åŒº: {{matchInfo.user2.region}}</text>
          <text class="user-age" wx:if="{{matchInfo.user2.age}}">å¹´é¾„: {{matchInfo.user2.age}}å²</text>
        </view>
      </view>
    </view>

    <!-- æ—¶é—´ä¿¡æ¯ -->
    <view class="time-card">
      <view class="time-item">
        <text class="time-label">åŒ¹é…æ—¶é—´</text>
        <text class="time-value">{{matchTime}}</text>
      </view>
      <view class="time-item" wx:if="{{matchInfo.status === 'matched'}}">
        <text class="time-label">åŠ å¥½å‹æˆªæ­¢</text>
        <text class="time-value deadline">{{deadline}}</text>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="actions" wx:if="{{matchInfo.status === 'matched'}}">
      <button class="btn-secondary" bindtap="skipMatch">
        è·³è¿‡æ­¤æ¬¡åŒ¹é…
      </button>
      <button class="btn-primary" bindtap="addFriend">
        ç«‹å³æ·»åŠ å¥½å‹
      </button>
    </view>
    
    <!-- å·²åŠ å¥½å‹çš„æ“ä½œ -->
    <view class="actions" wx:if="{{matchInfo.status === 'friend_added'}}">
      <button class="btn-primary" bindtap="startChat">
        å¼€å§‹èŠå¤©
      </button>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{!matchInfo}}">
    <text>åŠ è½½ä¸­...</text>
  </view>
</view>
