# 碰撞交友小程序

## 项目简介
一款基于碰撞码匹配的社交小程序，用户通过输入相同的碰撞码来匹配好友。

## 功能特性

### 用户端功能
- **微信登录**: 使用微信授权登录
- **碰撞匹配**: 输入碰撞码进行匹配
- **好友管理**: 添加、删除、屏蔽好友
- **聊天功能**: 与匹配的用户聊天
- **余额充值**: 微信支付充值
- **个人资料**: 完善个人信息

### 管理端功能
- **用户管理**: 查看、编辑、删除用户
- **碰撞码管理**: 管理热门碰撞码
- **碰撞记录**: 查看所有匹配记录
- **数据统计**: 用户统计、收入统计

## 技术架构

### 后端
- **框架**: Go + Gin
- **数据库**: MySQL
- **缓存**: Redis
- **认证**: JWT

### 前端
#### 管理后台
- **框架**: Vue3 + Element Plus
- **状态管理**: Pinia
- **路由**: Vue Router
- **HTTP客户端**: Axios

#### 小程序端
- **平台**: 微信小程序原生开发
- **UI**: 自定义样式组件

## 目录结构

```
pyp/
├── backend/                 # 后端代码
│   ├── config/             # 配置文件
│   ├── controllers/        # 控制器
│   ├── middlewares/        # 中间件
│   ├── models/            # 数据模型
│   ├── routes/            # 路由配置
│   ├── utils/             # 工具函数
│   └── main.go           # 主入口文件
├── admin-frontend/         # 管理后台
│   ├── src/
│   │   ├── components/    # 组件
│   │   ├── views/         # 页面
│   │   ├── stores/        # 状态管理
│   │   ├── router/        # 路由配置
│   │   └── utils/         # 工具函数
│   └── package.json
├── wx_web/                # 小程序代码
│   ├── pages/             # 页面
│   ├── utils/             # 工具函数
│   ├── images/            # 图片资源
│   ├── app.js             # 应用逻辑
│   ├── app.json           # 应用配置
│   └── app.wxss           # 全局样式
└── README.md
```

## 页面说明

### 小程序页面
- **index**: 首页 - 提交碰撞码、查看热门碰撞码
- **collision**: 碰撞记录页 - 查看所有匹配记录
- **match**: 匹配详情页 - 查看匹配详情、添加好友
- **friends**: 好友页 - 管理好友列表
- **chat**: 聊天页 - 与好友聊天
- **profile**: 个人页 - 个人信息管理
- **recharge**: 充值页 - 账户充值

### 管理后台页面
- **Dashboard**: 仪表盘 - 数据统计概览
- **Users**: 用户管理 - 用户列表、编辑、删除
- **CollisionCodes**: 碰撞码管理 - 管理热门碰撞码
- **Records**: 碰撞记录 - 查看所有匹配记录
- **Keywords**: 热门关键词 - 管理热门关键词

## 部署说明

### 后端部署
1. 安装 Go 1.21+
2. 安装 MySQL 和 Redis
3. 配置数据库连接信息
4. 运行 `go run main.go`

### 前端部署
1. 安装 Node.js 18+
2. 运行 `pnpm install`
3. 运行 `pnpm dev` 开发模式
4. 运行 `pnpm build` 构建生产版本

### 小程序部署
1. 使用微信开发者工具打开 wx_web 目录
2. 配置小程序 AppID
3. 上传代码到微信后台
4. 提交审核发布

## 主要特性

1. **实时匹配**: 用户输入碰撞码后立即匹配其他用户
2. **时限机制**: 匹配成功后有时间限制添加好友
3. **余额系统**: 每次提交碰撞码消耗余额
4. **强制添加**: 用户可设置是否允许被强制添加好友
5. **聊天功能**: 成功添加好友后可以聊天
6. **数据统计**: 完整的用户行为和收入统计

## 注意事项

1. 小程序需要配置服务器域名白名单
2. 支付功能需要配置微信支付
3. 需要申请必要的小程序权限（用户信息、支付等）
4. 生产环境需要配置HTTPS证书
